= Wykorzystanie Docker'a w celu zachowania czystości. Część 02 - Visual Studio Code
Mikołaj Dalecki <mikolaj.dalecki@outlook.com>
:toc:
:source-highlighter: pygments
:note-caption: Uwaga
:imagesdir: ./img

[.lead]
W niniejszym artykule przedstawiam mój sposób na pracę z Dockerem w taki sposób, aby zachować czystość komputera przy używaniu nowych technologii w celu nauki lub sporadycznym wykorzystaniu. 
Założenia, które sobie stawiam to "jak najmniej Dockera", czyli skupiam się na tym, aby wiedza potrzebna do jego wykorzystania nie przysłoniła tej wiedzy, którą chcemy posiąść. 
Jest to druga część artykułu na ten temat.

= Po prostu Docker

.Widok pluginu
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_PLuginDocker.png[]

Rozszerzenie Docker autorstwa firmy Microsoft dostępne pod adresem https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker pozwala nam na łatwe zarządzanie obrazami i ich uruchamianiem.
Ma jeszcze wiele innych funkcji, z które jednak wykraczają poza zakres niniejszego artykułu.

Najważniejsze jego funkcje to:

.Widok menu kontekstowego dającego dostęp do użytecznych funkcji
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_FunkcjePluginuDocker.png[]

Następujące funkcje są najciekawsze w przypadku _uruchamiania nowego kontenera z obrazu_:

Run::
    Jest to odpowiednik uruchamiania serwisu z poprzedniej części artykułu. 
    Uruchamia dany kontener i pozostawia go w tle.

Run interactive::
    Odpowiada uruchomieniu interaktywnego obrazu. 
    Po użyciu tej komendy całe wyjście i możliwość interakcji z obrazem jest dostępna z poziomu terminala Visual Studio Code.

Pull::
    Pozwala nam zaktualizować obraz, jeśli pojawiła się jego nowsza wersja pod danym tagiem.

Remove::
    Usuwa obraz, zwalniając przestrzeń dyskową.

W przypadku operacji na uruchomionym kontenerze najciekawsze funkcje to:

Attach Shell::
    Podłącza terminal Visual Studio Code pozwalając nam na działania w wybranym kontenerze. 

Open in Browser::
    Otwiera kontener w przeglądarce (jeśli ten udostępnił do tego port)

Stop::
    Zatrzymuje kontener.

Podsumowując – mamy do dyspozycji wszystkie podstawowe operacje co w konsoli tylko, że w dużo przyjemniejszym środowisku.

= Remote - Containers

.Widok wtyczki Remote-Containers
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_RemoteContainers.png[]

Jest to niewątpliwie najlepsza wtyczka do pracy z Dockerem, która dodatkowo w ciekawy sposób integruje się ze wtyczką powyżej, otóż: 

.Rozszerzenie pluginu Docker przez Remote - Containers.
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_FunkcjePluginuRemoteContainers.png[]

Attach Visual Studio Code::
    Funkcja ta powoduje, że nasze Visual Studio Code zostanie otwarte ponownie w kontekście kontenera!
    Dzięki temu zyskujemy możliwość otwierania folderów, które tam się znajdują. 
    Daje nam to świetną integrację, gdyż bez problemu możemy kopiować dane i pracować na plikach z poziomu Visual Studio Code. 

.Widok Visual Studio Code wewnątrz kontenera. 
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_QisokVSCWKontenerze.png[]

Jest jeszcze lepsza część tego rozszerzenia, otóż:

== .devcontainer

Visual Studio Code może działać w środowisko skonteneryzowanym (uruchamiać projekt w Dokerze) poprzez dodanie katalogu `.devcontainer` a w nim pliku `devcontainer.json` służącego do konfiguracji samego środowiska VSC oraz `Dockerfile`, który przechowuje informacje na temat naszego obrazu, w którym będziemy pracować.
VSC może uzupełnić strukturę plików za ciebie poprzez polecenie `((Remote-Containers)): Add Development Container Configuration Files`, także nie musisz nic zapisywać ani zapamiętywać.

Struktura katalogów i treść plików wygląda następująco:

.Struktura katalogów dla .devcontainer
image::WykorzystanieDockeraWCeluZachowaniaCzystyosci_WidokKonteneraDevContainer.png[]

1:: Widok na strukturę katalogów,
2:: Treść pliku Dockerfile dla środowiska w którym pisze wpisy na tego bloga,
3:: Treść devcontainer.json, który automatycznie konfiguruje to środowisko przy pierwszym starcie.
4:: Terminal oraz możliwość *otwierania portów w trakcie działania w kontenerze*!

[sidebar]
****
Więcej na temat konfiguracji Visual Studio Code pod kontenery znajdziesz https://code.visualstudio.com/docs/remote/containers-tutorial[tutaj], a jeszcze więcej informacji na https://code.visualstudio.com/docs/remote/containers[oficjalnej stronie Microsoft].
****
